Subject: [PATCH] fix advanced query
---
Index: backend/interface/src/main/resources/application.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/backend/interface/src/main/resources/application.properties b/backend/interface/src/main/resources/application.properties
--- a/backend/interface/src/main/resources/application.properties	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/backend/interface/src/main/resources/application.properties	(date 1766557390921)
@@ -67,3 +67,8 @@
 
 # General HTTP client settings
 spring.mvc.async.request-timeout=60000
+
+# Upload File Configuration
+spring.servlet.multipart.max-file-size=10MB
+spring.servlet.multipart.max-request-size=20MB
+spring.servlet.multipart.enabled=true
Index: backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/entity/BlogPostEntity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/entity/BlogPostEntity.java b/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/entity/BlogPostEntity.java
--- a/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/entity/BlogPostEntity.java	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/entity/BlogPostEntity.java	(date 1766560793213)
@@ -32,11 +32,11 @@
 
     @TableField("content")
     private String content;
-    
-    @TableField("summary")
+
+    @TableField(value = "summary", updateStrategy = FieldStrategy.ALWAYS)
     private String summary;
-    
-    @TableField("cover_file_path")
+
+    @TableField(value = "cover_file_path", updateStrategy = FieldStrategy.ALWAYS)
     private String coverFilePath;
     
     @TableField("category")
Index: backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/UpdateBlogPostRequest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/UpdateBlogPostRequest.java b/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/UpdateBlogPostRequest.java
--- a/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/UpdateBlogPostRequest.java	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/UpdateBlogPostRequest.java	(date 1766560793214)
@@ -18,7 +18,6 @@
     private String title;
     
     @NotBlank(message = "博客别名不能为空")
-    @Pattern(regexp = "^[a-z0-9-]+$", message = "别名只能包含小写字母、数字和连字符")
     @Size(min = 1, max = 100, message = "别名长度必须在1-100个字符之间")
     private String slug;
     
Index: frontend/src/pages/CreatorCenter.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/frontend/src/pages/CreatorCenter.jsx b/frontend/src/pages/CreatorCenter.jsx
--- a/frontend/src/pages/CreatorCenter.jsx	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/frontend/src/pages/CreatorCenter.jsx	(date 1766560795829)
@@ -41,12 +41,18 @@
     autoSaveInterval: 30000
   })
 
+  // Filters State
+  const [filters, setFilters] = useState({
+    keyword: '',
+    status: ''
+  })
+
   useEffect(() => {
     if (activeView === VIEWS.MANAGE || activeView === VIEWS.DASHBOARD) {
       loadArticles(currentPage)
       loadStats()
     }
-  }, [activeView, currentPage])
+  }, [activeView, currentPage, filters])
 
   const loadStats = async () => {
     try {
@@ -71,7 +77,7 @@
   const loadArticles = async (page = 1) => {
     setLoading(true)
     try {
-      const response = await getBlogPosts(page, pageSize)
+      const response = await getBlogPosts(page, pageSize, filters.keyword, filters.status)
       
       let articlesData = []
       let total = 0
@@ -103,12 +109,22 @@
     }
   }
 
+  const handleFilterChange = (key, value) => {
+    setFilters(prev => ({ ...prev, [key]: value }))
+    setCurrentPage(1) // Reset to first page when filtering
+  }
+
   const handleSave = async (formData, isPublish = false, isAutoSave = false) => {
     try {
-      const slug = formData.title
+      let slug = formData.title
         .toLowerCase()
-        .replace(/[^a-z0-9]+/g, '-')
-        .replace(/(^-|-$)/g, '')
+        .replace(/\s+/g, '-')
+        .replace(/[^a-z0-9\u4e00-\u9fa5-]+/g, '-')
+        .replace(/^-+|-+$/g, '')
+
+      if (!slug) {
+        slug = `post-${Date.now()}`
+      }
       
       const blogPostData = {
         title: formData.title,
@@ -326,6 +342,8 @@
           <ArticleList 
             articles={articles}
             loading={loading}
+            filters={filters}
+            onFilterChange={handleFilterChange}
             pagination={{
               currentPage,
               totalPages,
Index: backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/CreateBlogPostRequest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/CreateBlogPostRequest.java b/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/CreateBlogPostRequest.java
--- a/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/CreateBlogPostRequest.java	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/backend/interface/src/main/java/com/personal/portfolio/blog/interfaces/dto/request/CreateBlogPostRequest.java	(date 1766560793215)
@@ -22,7 +22,6 @@
     private String title;
     
     @NotBlank(message = "博客别名不能为空")
-    @Pattern(regexp = "^[a-z0-9-]+$", message = "别名只能包含小写字母、数字和连字符")
     @Size(min = 1, max = 100, message = "别名长度必须在1-100个字符之间")
     private String slug;
     
Index: frontend/src/components/creator/ArticleList.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/frontend/src/components/creator/ArticleList.jsx b/frontend/src/components/creator/ArticleList.jsx
--- a/frontend/src/components/creator/ArticleList.jsx	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/frontend/src/components/creator/ArticleList.jsx	(date 1766560793215)
@@ -6,6 +6,8 @@
 const ArticleList = ({ 
   articles, 
   loading, 
+  filters,
+  onFilterChange,
   pagination, // { currentPage, totalPages, totalItems, onPageChange }
   onEdit, 
   onDelete,
@@ -29,14 +31,20 @@
             <Search className="w-4 h-4 text-gray-400 absolute left-3 top-3" />
             <input 
               type="text" 
+              value={filters?.keyword || ''}
+              onChange={(e) => onFilterChange('keyword', e.target.value)}
               placeholder="Search articles..." 
               className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
             />
           </div>
-          <select className="border border-gray-300 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white">
-            <option>All Status</option>
-            <option>Published</option>
-            <option>Draft</option>
+          <select 
+            value={filters?.status || ''}
+            onChange={(e) => onFilterChange('status', e.target.value)}
+            className="border border-gray-300 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white"
+          >
+            <option value="">All Status</option>
+            <option value="PUBLISHED">Published</option>
+            <option value="DRAFT">Draft</option>
           </select>
         </div>
 
Index: frontend/src/components/creator/ArticleEditor.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/frontend/src/components/creator/ArticleEditor.jsx b/frontend/src/components/creator/ArticleEditor.jsx
--- a/frontend/src/components/creator/ArticleEditor.jsx	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/frontend/src/components/creator/ArticleEditor.jsx	(date 1766562061925)
@@ -328,6 +328,13 @@
     const file = e.target.files[0]
     if (!file) return
 
+    // Check file size (5MB)
+    if (file.size > 5 * 1024 * 1024) {
+      alert('File size exceeds 5MB limit')
+      e.target.value = ''
+      return
+    }
+
     // Create a preview URL
     const reader = new FileReader()
     reader.onloadend = () => {
@@ -459,6 +466,7 @@
                         <>
                           <UploadCloud className="w-8 h-8 mb-2 group-hover:scale-110 transition-transform" />
                           <span className="text-sm font-medium">Click to upload cover image</span>
+                          <span className="text-xs text-gray-400 mt-1">Recommended: 1200x600px, Max: 5MB</span>
                         </>
                       )}
                     </div>
Index: backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/BlogPostRepositoryImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/BlogPostRepositoryImpl.java b/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/BlogPostRepositoryImpl.java
--- a/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/BlogPostRepositoryImpl.java	(revision 8dcc6438f41e2cd88b48f6485dd1c90aa3e26468)
+++ b/backend/infrastructure/src/main/java/com/personal/portfolio/blog/infrastructure/persistence/BlogPostRepositoryImpl.java	(date 1766560793184)
@@ -202,10 +202,7 @@
         
         // 添加关键词条件
         if (keyword != null && !keyword.trim().isEmpty()) {
-            queryWrapper.and(wrapper -> wrapper
-                    .like(BlogPostEntity::getTitle, keyword.trim())
-                    .or()
-                    .like(BlogPostEntity::getContent, keyword.trim()));
+            queryWrapper.like(BlogPostEntity::getTitle, keyword.trim());
         }
         
         // 按创建时间降序排序
